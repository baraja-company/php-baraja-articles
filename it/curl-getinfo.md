Ottenere informazioni sulle richieste HTTP tramite cURL
=======================================================

> id: '310e5143-6b38-44c1-a1bf-de37f94ee17d'
> slug:
> 	- null
> 	it: ottenere-informazioni-sulle-richieste-http-tramite-curl
>
> cs: curl-getinfo
> publicationDate: '2022-07-06 19:50:00'
> mainCategoryId: '2a1ef8bc-14aa-438a-87e7-5b3f9643f325'
> sourceContentHash: '36748f0e9ced28da3da80155a0253140'

La funzione PHP `curl_getinfo()` fornisce informazioni dettagliate sulla richiesta cURL eseguita. Questo articolo spiega il significato di ciascun campo.

Esempio di utilizzo
---------------

Richiama la funzione sul risultato del contesto da `curl_init()`:

```php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://baraja.cz');
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0);
curl_setopt($ch, CURLOPT_NOBODY, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);

dump($info);
```

Tabella dei valori
--------------

La funzione `curl_getinfo()` restituisce un array associativo da cui è possibile recuperare chiavi e valori individuali.

| Chiave                    | Valore d'esempio           | Spiegazione                                                                                       |
|---------------------------|----------------------------|---------------------------------------------------------------------------------------------------|
| `url`                     | 'https://baraja.cz/'       | URL scaricato.                                                                                    |
| `content_type`            | 'text/html; charset=utf-8' | Codifica e tipo di contenuto utilizzati (dichiarati dal server di destinazione).                  |
| `http_code`               | 200                        | Codice di stato HTTP restituito. 200 significa OK.                                                |
| `header_size`             | 462                        | Dimensione dell'intestazione della richiesta HTTP in byte.                                        |
| `request_size`            | 47                         | Dimensione della richiesta.                                                                       |
| `filetime`                | -1                         | Ora del file (rivendicazione del server).                                                         |
| `ssl_verify_result`       | 0                          | Controllo SSL.                                                                                    |
| `redirect_count`          | 0                          | Numero di reindirizzamenti prima di raggiungere il documento di destinazione.                     |
| `total_time`              | 0.233384                   | Tempo totale trascorso in attesa di risposta. Dato in secondi.                                    |
| `namelookup_time`         | 0.021608                   | Tempo impiegato per risolvere il dominio sui record DNS. Specificato in secondi.                  |
| `connect_time`            | 0.035031                   | Tempo per stabilire una connessione al server di destinazione. Specificato in secondi.            |
| `pretransfer_time`        | 0.187275                   | Tempo necessario per trasferire i dati. Specificato in secondi.                                   |
| `size_upload`             | 0.0                        | Dimensione dei dati caricati in byte.                                                             |
| `size_download`           | 0.0                        | Dimensione dei dati scaricati in byte.                                                            |
| `speed_download`          | 0.0                        | Velocità di scaricamento in byte al secondo.                                                      |
| `speed_upload`            | 0.0                        | Velocità di caricamento in byte al secondo.                                                       |
| `download_content_length` | 15522.0                    | Dimensione dei dati scaricati in byte.                                                            |
| `upload_content_length`   | -1.0                       | Dimensione dei dati caricati in byte.                                                             |
| `starttransfer_time`      | 0.233354                   | Indica il valore TTFB (Time To First Byte) in secondi.                                            |
| `redirect_time`           | 0.0                        | Tempo trascorso per il reindirizzamento al download del contenuto canonico.                       |
| `redirect_url`            | `''`                       | URL canonico e destinazione del redirect.                                                         |
| `primary_ip`              | '76.76.21.21'              | Da quale IP è stato scaricato il contenuto.                                                       |
| `certinfo`                | array (0)                  | Ulteriori dettagli sul certificato del sito di destinazione.                                      |
| `primary_port`            | 443                        | La porta di rete utilizzata (80 significa HTTP, 443 significa HTTPS).                             |
| `local_ip`                | '192.168.0.186'            | Indirizzo IP locale della macchina che ha inviato la richiesta.                                   |
| `local_port`              | 56568                      | Porta del computer locale da cui è stata inviata la richiesta.                                    |
| `http_version`            | 3                          | Versione del protocollo HTTP.                                                                     |
| `protocol`                | 2                          | Codice del protocollo usato.                                                                      |
| `ssl_verifyresult`        | 0                          | Risultato della verifica SSL.                                                                     |
| `scheme`                  | 'HTTPS'                    | Protocollo all'inizio dell'URL.                                                                   |
| `appconnect_time_us`      | 186220                     | Tempo per stabilire la connessione con il server di destinazione. Specificato in microsecondi.    |
| `connect_time_us`         | 35031                      | Tempo di connessione al server di destinazione. Specificato in microsecondi.                      |
| `namelookup_time_us`      | 21608                      | Tempo necessario per riscrivere il dominio tramite i record DNS. Specificato in microsecondi.     |
| `pretransfer_time_us`     | 187275                     | Tempo impiegato per trasferire i dati. Specificato in microsecondi.                               |
| `redirect_time_us`        | 0                          | Tempo trascorso per il reindirizzamento al download del contenuto canonico. Dato in microsecondi. |
| `starttransfer_time_us`   | 233354                     | Indica il valore del tempo TTFB (Time To First Byte). In microsecondi.                            |
| `total_time_us`           | 233384                     | Tempo totale trascorso in attesa di una risposta. Specificato in microsecondi.                    |

Alcune chiavi potrebbero non essere sempre disponibili. Verificare sempre l'esistenza della chiave e la validità del valore prima di leggerlo.
