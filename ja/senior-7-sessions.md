突然のPHPスクリプトのクラッシュへの対処法
======================

> id: '41edbf1b-3ca5-487f-a54c-fac9926bc3d2'
> slug:
> 	cs: senior-7-sessions
> 	ja: tu-rannophpsukuriputonokurasshuheno-dui-chu-fa
> 
> publicationDate: '2023-02-11 14:30:00'
> mainCategoryId: '8b6e2597-bee1-45d5-b0bf-48ccb2d0d94a'
> sourceContentHash: bdd1e207ee9c0ba19c39f0b5c7d83c43

2016年末、文字通り同僚に助けられた時の話：PHPアプリケーションで、プロキシスクリプトを介して画像をチェックインすることにした。プロキシスクリプトは、とりわけ、送られてくるリクエストに応じて寸法やその他のパラメータを調整することができる。最適化の一環として、生成されたバリアントをディスクに物理的に保存することもできます。

しかし、本番運用では、突然大きな負荷がかかり始め、何千ものリクエストがキューに並ぶことになります。画像は、ユーザーごとに1枚ずつ順次読み込まれます。ページの更新やリンクのクリックがうまくいかない。アプリケーションは完全にフリーズしているようです。すべてが処理されるのを待つだけで、効果があります。

何が問題なのでしょうか？本文中に3つの大きな手がかりを挙げ、問題の素早い検索を可能にしました。Hotfixには些細な解決策があります。
