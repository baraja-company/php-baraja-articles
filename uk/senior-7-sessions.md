Як боротися з раптовими аварійними завершеннями PHP-скриптів
============================================================

> id: '41edbf1b-3ca5-487f-a54c-fac9926bc3d2'
> slug:
> 	cs: senior-7-sessions
> 	uk: yak-borotisya-z-raptovimi-avarijnimi-zaversennyami-php-skriptiv
> 
> publicationDate: '2023-02-11 14:30:00'
> mainCategoryId: '8b6e2597-bee1-45d5-b0bf-48ccb2d0d94a'
> sourceContentHash: bdd1e207ee9c0ba19c39f0b5c7d83c43

Історія з кінця 2016 року, коли мене буквально врятував колега: в PHP-додатку ви вирішили перевіряти зображення через проксі-скрипт, який, серед іншого, може підлаштовувати їхні розміри та інші параметри відповідно до вхідного запиту. В рамках оптимізації ви також зберігаєте згенеровані варіанти фізично на диску.

Однак у виробничій роботі ви раптом починаєте бачити величезне навантаження і тисячі запитів, що стоять у черзі. Зображення завантажуються послідовно одне за одним для кожного користувача. Оновлення сторінки та переходи за посиланнями не працюють. Додаток здається повністю замороженим. Залишається тільки чекати, поки все обробиться.

У чому може бути проблема? Я перерахував 3 основні підказки в тексті, щоб забезпечити швидкий пошук проблеми. Hotfix має тривіальне рішення.
